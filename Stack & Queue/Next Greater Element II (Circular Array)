ğŸ”¥ Next Greater Element II (Circular Array) â€“ Revision Notes
ğŸ“ Problem: https://leetcode.com/problems/next-greater-element-ii/submissions/1681458351/

Given a circular array nums.

For each element, find the Next Greater Element (NGE).

If no greater element exists â†’ return -1.

âš¡ Intuition

Normal NGE (LeetCode 496) â†’ linear array, simple monotonic stack.

But here array is circular â†’ last element may find NGE in the front part.

Trick â†’ iterate the array twice (2n) to simulate circular behavior.

ğŸ› ï¸ Approach

Traverse array from right to left (2n - 1 â†’ 0).

Maintain monotonic decreasing stack:

Pop elements â‰¤ current element (useless as NGE).

If stack not empty â†’ top is NGE.

If empty â†’ NGE = -1.

Only update result[i] when i < n (first pass only).

Push current element into stack.

â±ï¸ Complexity

Time: O(2n) = O(n) (each element pushed/popped at most once).

Space: O(n) (stack + result).

âœ… Dry Run Example

nums = [1, 2, 1]

Traverse from i = 5 â†’ 0 (2n - 1).

Build stack & results:

i=5 (idx=2): stack empty â†’ result[2] = -1 â†’ push 1
i=4 (idx=1): stack=[1], top=1 â‰¤ 2 â†’ pop â†’ empty â†’ result[1] = -1 â†’ push 2
i=3 (idx=0): stack=[2], top=2 > 1 â†’ result[0]=2 â†’ push 1


â¡ï¸ Final result = [2, -1, 2]

ğŸ§© Clean Code
class Solution {
public:
    vector<int> nextGreaterElements(vector<int>& nums) {
        int n = nums.size();
        vector<int> result(n, -1);
        stack<int> st;

        for (int i = 2*n - 1; i >= 0; i--) {
            int idx = i % n;

            while (!st.empty() && st.top() <= nums[idx]) {
                st.pop();
            }

            if (i < n && !st.empty()) {
                result[idx] = st.top();
            }

            st.push(nums[idx]);
        }
        return result;
    }
};

ğŸ“Œ Key Differences: NGE I vs NGE II
Feature	NGE I	NGE II
Array	Linear	Circular
Pass	1 pass	2 passes
Trick	Simple stack	Use i % n index
Result	Next greater on right	Next greater on right (even wrapping around)

ğŸ‘‰ Monotonic stack rule yaad rakh:

Next Greater â†’ traverse right â†’ left, pop smaller.

Next Smaller â†’ traverse right â†’ left, pop bigger.
